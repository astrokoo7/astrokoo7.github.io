---
layout: post
title: "Homogeneous Coordinates"
categories: graphics
---

## background

3D 가상 공간을 표현하는 데카르트 좌표계에서 평행한 두 직선은 서로 영원히 교차하지 않는다.

하지만 우리가 보는 투영 공간에선 평행한 두 직선은 시야에서 멀어질수록 간격이 좁아지다

무한대의 한점인 지평선에서 만난다. 

![alt]({{ site.url }}{{ site.baseurl }}/assets/images/railline.png)

한편 데카르트 좌표계에선 2D의 한점은 x, y로 표현하고 평행한 두 직선을 x, y로 수식화 

하면 x, y가 무한으로 갈때 두 직선이 만나는 수식을 만들 수 없다.

```
Ax + By + C = 0

Ax + By + D = 0 
```

두 직선의 방정식의 해는 C = D 일때인 같은 직선일때만 존재하고 C ≠ D가 다른 두 직선의

해는 존재하지 않는다.

동차 좌표계에선 투영 공간의 평행한 두 직선이 무한대의 한점에서 만나는 걸 수식화 할 수 있어

데카르트 좌표계를 동차 좌표계로 변환하여 계산 후 다시 데카르트 좌표계로 반영하는 식으로 

테카르트 좌표계에서 투영 공간을 설명 할 수 있게 됬다.


## 동차 좌표계

동차 좌표계는 데카르트 좌표계인 (x, y)에 N-차수인 w를 추가하여 (x, y, w) 표현한다.

반대로 동차 좌표계는 데카르트 좌표계로 (x/w, y/w)로 역변환 할 수 있다.

예를들어 데카르트 좌표계 x, y 값 (2, 2)에 대해 1 차수인 동차 좌표계로 변환은 (2, 2, 1)로 

쓰며 역변환하여 (2/1, 2/1) 데카르트 좌표계를 얻을 수 있다.

또한 동차 좌표계의 차수가 무한히 증가시 데카르트 좌표계 (2, 2)는 동차 좌표계 (2, 2, ∞)로 

쓰며 역변환시 (2/∞, 2/∞)가 되어 (0, 0)에 무한히 가까워 진다.

같은 데카르트 좌표계 (2, 2)도 동차 좌표계 차수에 따라 간격이 좁아지키도 커지기도 하는데 

3D 그래픽에선 유한의 시야 거리 z 값을 차수로 두어 투영 공간을 설명한다.

```
A(x/w) + B(y/w) + C = 0

A(x/w) + B(y/w) + D = 0
```

테카르트 좌표계인 평행한 두 직선을 동차 좌표계로 변환하여 해를 구하면 

w * (C + D) = 0를 만족하는 수로 C와 D가 다르더라도 w가 0에 무한히 가까워질 때 두 직선은 한 점에서 만나 해를

가질 수 있음을 알 수 있다.

