---
layout: post
title: "TBN matrics"
categories: c++
---

## Tangent Space

조명 계산에 가장 기본인 NDotL은 빛이 입사하는 표면의 밝기를 결정하는 데 

사용되고 수식은 아래와 같다.

\\( NDotL = N · L \\)

이때 빛의 방향(L)에 대한 표면 법선(N) 벡터는 버텍스마다 가질 수 있는데

버텍스와 버텍스 사이는 보간 값을 사용하여 빛의 밝기를 결정한다.

따라서 버텍스 간 빛의 반응에 대한 디테일이 떨어질 수 있는데 

이를 보완하기 위해 픽셀 단위로 N 값을 가질 수 있도록 노멀 맵에 저장 후 

픽셀 쉐이더에서 사용하여 디테일을 올릴 수 있다.

노멀 맵의 각 텍셀에 저장 된 오브젝트 공간 상 표면 법선 벡터 값은 

텍스쳐에 저장 시 텍스쳐 공간(tangent space)으로 변환되어 저장된다.

텍스쳐 공간이란 


.. ing


## TBN matrics

TBN 행렬은 텍스쳐 공간(tangent space)에서 모델 공간으로의 변환 

및 역변환을 다룬다는 점에서 서로 다른 공간 간 변환을 다루는 MVP 

행렬과 같은 목적성을 가진다.

<!-- begin_excerpt -->

하지만 TBN 행렬을 사용한 공간 변환은

MVP 행렬을 사용한 변환처럼 기하학적으로 직관적이지 않다.

<!-- end_excerpt -->

이는 모델 공간상 정의 된 버텍스 노멀을 텍스쳐 공간으로

균일한 방법을 통해 인코딩하고 다시 디코딩하는 수학적 수식이라서

추상적이다.

> <font size="2"> 
> TBN 행렬도 기하학적으로 표현할 수 있긴 하지만 정확히 표현하기 어렵다. <br>
> 오히려 수식의 의도를 먼저 이해하고 머릿속으로 기하학적 모양을 상상하는 것이 더 낫다.
> </font>